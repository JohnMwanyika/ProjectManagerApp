extends sub-layout

block content
    main#main.main
        .pagetitle
            h1=title
            nav
                ol.breadcrumb
                    li.breadcrumb-item
                        a(href="/dashboard") Home
                    li.breadcrumb-item Project
                    li.breadcrumb-item Milestone
                    li.breadcrumb-item.active New Milestone
        section.section
            .row
                //  Left side 
                .col-lg-12
                    //  Basic information 
                    .card.mb-4
                        .card-body
                            if (message)
                                h1 #{message}
                            h4.fw-lighter.text-secondary.my-3.mx-3 Project Milestones
                            hr
                            .row 
                                .col-lg-6.px-5
                                    p
                                        strong Project : 
                                        span #{project.title}
                                    p
                                        strong By : 
                                        span #{project.created_by.first_name} #{project.created_by.last_name}
                                    

                                    .col-lg-8
                                        p.text-center 
                                            strong All Milestones 
                                        hr
                                        .div(style="height:220px").overflow-auto
                                            each row,index in rows
                                                .accordion#accordionExample
                                                    .accordion-item
                                                        h2.accordion-header(id=`heading-${row.mile_id}`)
                                                            button.accordion-button.collapsed(type="button", data-bs-toggle="collapse", data-bs-target=`#collapse-${row.mile_id}`,aria-expanded="false", aria-controls=`collapse-${row.mile_id}`).
                                                            
                                                                (#{index+1})#{row.name}
                                                            
                                                        .accordion-collapse.collapse(aria-labelledby=`heading-${row.mile_id}`, data-bs-parent="#accordionExample", id=`collapse-${row.mile_id}`)
                                                            .accordion-body
                                                                strong Overview.
                                                                |  #{row.description} 
                                                                //- code .accordion-body
                                                                //- | , though the transition does limit overflow.
                                        hr



                                .col-lg-6
                                    p.text-center 
                                        strong Add New Milestone
                                    form(action="/dashboard/projects/new-project/" method="post").px-5
                                        .mb-3.row
                                            label.col-sm-4.col-form-label(for="title") Name of Milestone
                                            .col-sm-8
                                                input.form-control#title(type="text",name="title")
                                        
                                        .mb-3.row
                                            label.col-sm-4.col-form-label(for="description") Description
                                            .col-sm-8
                                                textarea.form-control#description(placeholder="Milestone overview" style="height: 100px;" name="description" required)
                                    
                                        .row
                                            .col-lg-12.mb-3

                                                    .d-grid.gap-2.col-2.mx-auto.mt-3
                                                        //- button.btn.btn-secondary(type="submit") Save
                                                        button.btn.btn-primary(type="submit") Add

    script.
        